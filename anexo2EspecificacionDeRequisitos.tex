\section{Introducción}
En este anexo se presentarán los distintos requisitos funcionales de la aplicación de ejemplo que se ha desarrollado. Se expondrán tanto los requisitos como los diagramas de caso de uso, plantillas de caso de uso.
\section{Requisitos Funcionales}
Los requisitos que se establecen son las funcionalidades mínimas que se han propuesto como objetivos en la aplicación.
\subsection{Requisitos Funcionales en el Servidor}
Estos son los requisitos que se han establecido para que el servidor se considere que cumple con la funcionalidad exigida.
\begin{itemize}
	\item \textbf{RF1 Recibir Imagen:} El servidor deberá ser capaz de, a través de una petición de tipo POST, recibir una imagen correctamente y guardarla en el sistema. Cuando este reciba una petición de tipo POST procederá a recibir los datos, seguidamente se guardarán los datos en el sistema de almacenamiento de la máquina en la que este alojado el servidor. Además deberá comprobar que lo que está recibiendo es una imagen para evitar que se nos envíe archivos maliciosos con extensiones no permitidas.
	\item \textbf{RF2 Procesar Imagen:} El servidor ejecutará la herramienta de predicción sobre los datos recibidos previamente. Deberá tener la configuración adecuada para que la herramienta funcione de manera adecuada y que ejecute una predicción sobre la imagen. La dificultad se centra en la configuración de una herramienta tan compleja como puede ser las de tratamiento de imágenes en \textit{machine learning}.
	\item \textbf{RF3 Devolver Predicción:} El servidor deberá ser capaz de devolver una frase en español que sea el resultante de la predicción sobre la imagen. Para ello tiene otro requisito funcional subyacente a él.
	\begin{itemize}
		\item \textbf{RF3.1 Traducir Predicción:} El servidor deberá ser capaz de traducir la predicción del inglés al español, ya que las herramientas que se pueden utilizar para esta aplicación trabajan todas en inglés. 
	\end{itemize}
\end{itemize}
\subsection{Requisitos Funcionales en el Cliente}
Se presentan ahora los requisitos que se han establecido en el cliente.
\begin{itemize}
	\item \textbf{RF4 Solicitar Preedicción:} El cliente Android deberá permitir al usuario tomar una foto. Teniendo en cuenta que la persona a la que va dirigida la aplicación es una persona con dificultades de visión o invidente, esta deberá permitir al usuario tomar la foto sin que este deba tener conocimiento alguno de la interfaz o de si hay un botón que este deba pulsar. Por tanto, la aplicación mostrará una pantalla sin interfaz que está a la espera de que el usuario simplemente toque la pantalla, entonces la aplicación tomará automáticamente la foto.
	\begin{itemize}
		\item \textbf{RF4.1 Tomar Foto:} La aplicación tomará un foto de manera automática sin necesidad de que el usuario tenga que interactuar con la interfaz de manera específica, sino que podrá hacerlo sin saber qué se encuentra en la pantalla, tan sólo deberá tocar cualquier punto de la pantalla.
		\item \textbf{RF4.2 Mandar Foto:} La aplicación cliente deberá ejecutar una petición de tipo POST hacia un servidor y mandar correctamente la imagen para que esta sea procesada por el servidor. Mientras el servidor procesa y recibe la imagen, la aplicación mostrará una ventana que informe de de la imagen se esta procesando, esta ventana no es con el objetivo de que el usuario la vea, sino de que la aplicación este a la espera de que la imagen sea procesada y que el usuario no tenga la capacidad de realizar nada en ese período. Esto asegurará que la aplicación no falle mientras se procesa la imagen.
		\item \textbf{RF4.3 Leer Predicción:} Una vez se ha procesado la imagen la aplicación deberá ser capaz de recibir la predicción del servidor y, debido a que la persona que la use no tendrá la capacidad de leerla, la aplicación leerá la aplicación en alto a través de una librería \textit{text to speech}.
	\end{itemize}
\end{itemize}
\section{Diagrama de casos de uso}
En este apartado se procede a presentar el diagrama o diagramas de caso de uso de la aplicación, además de las correspondientes tablas asociadas a cada uno de los requisitos funcionales del sistema.

El diagrama de casos de uso del cliente se puede ver en la imagen \ref{CasoUso1}.

El diagrama de casos de uso del servidor se puede ver en la imagen \ref{CasoUso2}.

Mientras que las tablas de cada uno de los requisitos funcionales se pueden ver en:
\begin{itemize}
	\item \textbf{RF1 Recibir Imagen}: Se puede ver en la tabla \ref{tabla:RF1}.
	\item \textbf{RF2 Procesar Imagen:} Se puede ver en la tabla \ref{tabla:RF2}.
	\item \textbf{RF3 Devolver Predicción:} Se puede ver en la tabla \ref{tabla:RF3}.
	\begin{itemize}
		\item \textbf{RF3.1 Traducir Predicción:} Se puede ver en la tabla \ref{tabla:RF3.1}.
	\end{itemize}
	\item \textbf{RF4 Solicitar Predicción:} Se puede ver en la tabla \ref{tabla:RF4}.
	\begin{itemize}
		\item \textbf{RF4.1 Tomar Foto:} Se puede ver en la tabla \ref{tabla:RF4.1}.
		\item \textbf{RF4.2 Mandar Foto:} Se puede ver en la tabla \ref{tabla:RF4.2}.
		\item \textbf{RF4.3 Leer Predicción:} Se puede ver en la tabla \ref{tabla:RF4.3}.
	\end{itemize}
\end{itemize}
\figura{1}{imgs/CasoUso1.png}{Diagrama de caso de uso del cliente}{CasoUso1}{}
\figura{1}{imgs/CasoUso2.png}{Diagrama de caso de uso del servidor}{CasoUso2}{}

\tablaSmallSinColores{Caso de uso: RF1 Recibir imagen}{p{3cm} p{.75cm} p{9.5cm}}{RF1}{
  \multicolumn{3}{l}{RF1  Recibir imagen} \\
 }
 {
  Descripción                            & \multicolumn{2}{l}{Se recibirá una imagen enviada desde un cliente y se guardará.} \\\hline
  Precondiciones                         & \multicolumn{2}{l}{Deberá haberse recibido una petición de tipo POST} \\\hline
  \multirow{4}{3.5cm}{Secuencia normal}  & Paso & Acción \\\cline{2-3}
                                         & 1    & Se detecta una petición POST \\\cline{2-3}
                                         & 2    & Se comprueba que el fichero recibido es una imagen \\\cline{2-3}
                                         & 3    & Si es imagen, se guarda, sino, se descarta. \\\hline
  Postcondiciones                        & \multicolumn{2}{l}{Si se ha recibido una imagen, esta deberá estar guardada} \\\hline
  \multirow{2}{3.5cm}{Excepciones}       & Paso & Acción \\\cline{2-3}
                                         &      &  \\\hline
  Rendimiento                            &      & \\\hline
  Frecuencia                             & \alta{2} \\\hline
  Importancia                            & \alta{2} \\\hline
  Urgencia                               & \alta{2} \\\hline
  Comentarios                            & \multicolumn{2}{l}{Sólo se reciben imágennes tipo: jpg, jpeg y png} \\
}
\tablaSmallSinColores{Caso de uso: RF2 Procesar imagen}{p{3cm} p{.75cm} p{9.5cm}}{RF2}{
  \multicolumn{3}{l}{RF2  Procesar imagen} \\
 }
 {
  Descripción                            & \multicolumn{2}{l}{La imagen será procesada a través de la herramienta elegida.} \\\hline
  Precondiciones                         & \multicolumn{2}{l}{Se deberá haber guardado una imagen recibida por el usuario} \\\hline
  \multirow{4}{3.5cm}{Secuencia normal}  & Paso & Acción \\\cline{2-3}
                                         & 1    & Se escribe nombre de la imagen en fichero de procesado ``tasks.txt'' \\\cline{2-3}
                                         & 2    & Se ejecuta \textit{script} de  extracción de características de la imagen \\\cline{2-3}
                                         & 3    & Se lanza la extracción de frase. \\\hline
  Postcondiciones                        & \multicolumn{2}{l}{Se tiene un documento ``result.html'' con la predicción} \\\hline
  \multirow{2}{3.5cm}{Excepciones}       & Paso & Acción \\\cline{2-3}
                                         &      &  \\\hline
  Rendimiento                            &      & \\\hline
  Frecuencia                             & \alta{2} \\\hline
  Importancia                            & \alta{2} \\\hline
  Urgencia                               & \media{2} \\\hline
  Comentarios                            & \multicolumn{2}{l}{El fichero tiene dentro la frase que se quiere obtener} \\
}
\tablaSmallSinColores{Caso de uso: RF3 Devolver predicción}{p{3cm} p{.75cm} p{9.5cm}}{RF3}{
  \multicolumn{3}{l}{RF3 Devolver predicción} \\
 }
 {
  Descripción                            & \multicolumn{2}{l}{Se recogerá la predicción sobre la imagen y como respuesta a la petición esta será devuelta.} \\\hline
  \multirow{3}{*}{Precondiciones}		& 1	&Se deberá haber guardado una imagen recibida por el usuario \\\cline{2-3}
  										& 2 & Deberá existir el documento ``result.html'' \\\cline{2-3}
  										& 3 & Deberá traducirse la cadena al español \\\hline
  \multirow{5}{3.5cm}{Secuencia normal}  & Paso & Acción \\\cline{2-3}
                                         & 1    & Se abre el fichero ``result.html'' si existe. \\\cline{2-3}
                                         & 2    & Se extrae la cadena en inglés. \\\cline{2-3}
                                         & 3    & Se Traduce la cadena al español \\\cline{2-3}
                                         & 4	& Se devuelve la cadena como resultado de la petición POST \\\hline
  Postcondiciones                        & \multicolumn{2}{l}{Se ha devuelto una cadena de texto, correspondiente a la predicción.} \\\hline
  \multirow{2}{3.5cm}{Excepciones}       & Paso & Acción \\\cline{2-3}
                                         &  1   & Si el fichero ``result.html'' no existe se genera un error. \\\hline
  Rendimiento                            &      & \\\hline
  Frecuencia                             & \alta{2} \\\hline
  Importancia                            & \alta{2} \\\hline
  Urgencia                               & \media{2} \\\hline
  Comentarios                            &  \\
}
\tablaSmallSinColores{Caso de uso: RF3.1 Traducir predicción}{p{3cm} p{.75cm} p{9.5cm}}{RF3.1}{
  \multicolumn{3}{l}{RF3.1 Traducir predicción} \\
 }
 {
  Descripción                            & \multicolumn{2}{l}{A partir de una cadena de caracteres en inglés, se traducirá al español.} \\\hline
  \multirow{2}{*}{Precondiciones}		& 1	& La cadena no deberá ser nula\\\cline{2-3}
  										& 2 & La cadena deberá estar en inglés \\\hline
  \multirow{6}{3.5cm}{Secuencia normal}  & Paso & Acción \\\cline{2-3}
                                         & 1    & Se crea url con cabecera para la traducción. \\\cline{2-3}
                                         & 2    & Se manda petición a la página de Google traductor. \\\cline{2-3}
                                         & 3    & Se reciben los datos en un json \\\cline{2-3}
                                         & 4	& Se extrae la cadena del json\\\cline{2-3}
                                         & 5	& Se devuelve la cadena traducida\\\hline
  Postcondiciones                        & \multicolumn{2}{l}{Se ha devuelto una cadena de texto, correspondiente a la predicción.} \\\hline
  \multirow{2}{3.5cm}{Excepciones}       & Paso & Acción \\\cline{2-3}
                                         &      & \\\hline
  Rendimiento                            &      & \\\hline
  Frecuencia                             & \alta{2} \\\hline
  Importancia                            & \media{2} \\\hline
  Urgencia                               & \baja{2} \\\hline
  Comentarios                            &  \multicolumn{2}{l}{Se simula un conexión vía navegador para la traducción}\\
}
\tablaSmallSinColores{Caso de uso: RF4 Solicitar predicción}{p{3cm} p{.75cm} p{9.5cm}}{RF4}{
  \multicolumn{3}{l}{RF4 Solicitar predicción} \\
 }
 {
  Descripción                            & \multicolumn{2}{l}{El usuario solicitará una predicción cuando toque la pantalla.} \\\hline
  Precondiciones
  										&  &  \\\hline
  \multirow{8}{3.5cm}{Secuencia normal}  & Paso & Acción \\\cline{2-3}
                                         & 1    & Se muestra pantalla en blanco a la espera de que el usuario la toque para tomar la foto. \\\cline{2-3}
                                         & 2    & Cuando el usuario toca la pantalla se toma automáticamente una foto. \\\cline{2-3}
                                         & 3    & Se guarda la imagen en el dispositivo \\\cline{2-3}
                                         & 4	& Se crea la petición POST y se manda\\\cline{2-3}
                                         & 5	& Se recibe la predicción como respuesta a la petición POST\\\cline{2-3}
                                         & 6	& Se muestra la predicción en pantalla junto con la imagen\\\cline{2-3}
                                         & 7	& Se lee la predicción con la librería \textit{Text to Speech}\\\hline
  Postcondiciones                        & \multicolumn{2}{l}{Se ha leído en voz alta el resultado de la ejecución.} \\\hline
  \multirow{2}{3.5cm}{Excepciones}       & Paso & Acción \\\cline{2-3}
                                         & 1    & Si no se puede conectar con el servidor, se lee un mensaje de error en voz alta. \\\hline
  Rendimiento                            &      & \\\hline
  Frecuencia                             & \alta{2} \\\hline
  Importancia                            & \media{2} \\\hline
  Urgencia                               & \media{2} \\\hline
  Comentarios                            &  \multicolumn{2}{l}{Este requisito es con el que interactúa el usuario.}\\
}
\tablaSmallSinColores{Caso de uso: RF4.1 Tomar Foto}{p{3cm} p{.75cm} p{9.5cm}}{RF4.1}{
  \multicolumn{3}{l}{RF4.1 Tomar Foto} \\
 }
 {
  Descripción                            & \multicolumn{2}{l}{Cuando el usuario ha solicitado la predicción, el sistema toma una foto de manera automática.} \\\hline
  Precondiciones
  										&  \multicolumn{2}{l}{El usuario debe haber tocado la pantalla}  \\\hline
  \multirow{6}{3.5cm}{Secuencia normal}  & Paso & Acción \\\cline{2-3}
                                         & 1    & Se inicia la previsualización de la cámara. \\\cline{2-3}
                                         & 2    & Se toma la foto. \\\cline{2-3}
                                         & 3    & Se trata los datos recibidos para guardarlos en el dispositivo \\\cline{2-3}
                                         & 4	& Se crea la petición POST y se manda\\\cline{2-3}
                                         & 5	& Se cierra la previsualización\\\hline
  Postcondiciones                        & \multicolumn{2}{l}{Se ha guardado la imagen en el sistema.} \\\hline
  \multirow{2}{3.5cm}{Excepciones}       & Paso & Acción \\\cline{2-3}
                                         & 1    & Si la cámara no está disponible se genera un error. \\\hline
  Rendimiento                            &      & \\\hline
  Frecuencia                             & \alta{2} \\\hline
  Importancia                            & \media{2} \\\hline
  Urgencia                               & \media{2} \\\hline
  Comentarios                            &  \multicolumn{2}{l}{Se usará la API Camera de Android para poder hacer la foto de manera automática.}\\
}
\tablaSmallSinColores{Caso de uso: RF4.2 Mandar Foto}{p{3cm} p{.75cm} p{9.5cm}}{RF4.2}{
  \multicolumn{3}{l}{RF4.2 Mandar Foto} \\
 }
 {
  Descripción                            & \multicolumn{2}{l}{Se manda la foto al servidor a través de una petición de tipo POST.} \\\hline
  Precondiciones
  										&  \multicolumn{2}{l}{Se ha tomado la foto correctamente}  \\\hline
  \multirow{6}{3.5cm}{Secuencia normal}  & Paso & Acción \\\cline{2-3}
                                         & 1    & Se construye la petición POST y todos los objetos necesarios para poder ejecutar dicha petición. \\\cline{2-3}
                                         & 2    & Antes de ejecutarla se crea una ventana para privar al usuario de hacer acciones innecesarias sobre la aplicación,pero esta no se muestra aún. \\\cline{2-3}
                                         & 3    & Se pone en ejecución la petición POST \\\cline{2-3}
                                         & 4	& Se muestra la ventana para que el usuario no pueda hacer acciones innecesarias.\\\cline{2-3}
                                         & 5	& Una vez se ha terminado la petición, se recibe el resultado y se almacena. \\\cline{2-3}
                                         & 6	& Se quita la ventana de privación de acciones. \\\hline
  Postcondiciones                        & \multicolumn{2}{l}{Se ha obtenido el resultado de la predicción.} \\\hline
  \multirow{2}{3.5cm}{Excepciones}       & Paso & Acción \\\cline{2-3}
                                         & 1    & Si no se conecta con el servidor se lee un mensaje de error en vez de la predicción. \\\hline
  Rendimiento                            &      & \\\hline
  Frecuencia                             & \alta{2} \\\hline
  Importancia                            & \alta{2} \\\hline
  Urgencia                               & \media{2} \\\hline
  Comentarios                            &  \multicolumn{2}{l}{Se usará la API Http de Apache para poder hacer la petición POST de manera adecuada.}\\
}
\tablaSmallSinColores{Caso de uso: RF4.3 Leer predicción}{p{3cm} p{.75cm} p{9.5cm}}{RF4.3}{
  \multicolumn{3}{l}{RF4.3 Leer predicción} \\
 }
 {
  Descripción                            & \multicolumn{2}{l}{Se lee en voz alta la predicción que se ha obtenido.} \\\hline
  Precondiciones
  										&  \multicolumn{2}{l}{Se tiene una cadena para leer}  \\\hline
  \multirow{3}{3.5cm}{Secuencia normal}  & Paso & Acción \\\cline{2-3}
                                         & 1    & Se llama al objeto de lectura con la cadena a leer. \\\cline{2-3}
                                         & 2    & Se lee en voz alta.  \\\hline
  Postcondiciones                        & \multicolumn{2}{l}{Se ha leído el mensaje disponible para lectura.} \\\hline
  \multirow{2}{3.5cm}{Excepciones}       & Paso & Acción \\\cline{2-3}
                                         &      & \\\hline
  Rendimiento                            &      & \\\hline
  Frecuencia                             & \alta{2} \\\hline
  Importancia                            & \alta{2} \\\hline
  Urgencia                               & \baja{2} \\\hline
  Comentarios                            &  \multicolumn{2}{l}{Se usará la API \textit{Text to Speech} de Android para poder leer el mensaje.}\\
}